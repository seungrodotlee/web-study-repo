<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>비동기처리 | Breaking-Web</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="https://spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css">
    <link rel="stylesheet" href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css">
    <meta name="description" content="웹 박살내기">
    
    <link rel="preload" href="/assets/css/0.styles.4ef0f5e0.css" as="style"><link rel="preload" href="/assets/js/app.6025681a.js" as="script"><link rel="preload" href="/assets/js/2.0e074105.js" as="script"><link rel="preload" href="/assets/js/20.9b388371.js" as="script"><link rel="preload" href="/assets/js/3.009c281c.js" as="script"><link rel="prefetch" href="/assets/js/10.6047e51f.js"><link rel="prefetch" href="/assets/js/11.6dbf7fce.js"><link rel="prefetch" href="/assets/js/12.dff9c09c.js"><link rel="prefetch" href="/assets/js/13.c4e37c2f.js"><link rel="prefetch" href="/assets/js/14.2afb602b.js"><link rel="prefetch" href="/assets/js/15.15d1f378.js"><link rel="prefetch" href="/assets/js/16.13599f4e.js"><link rel="prefetch" href="/assets/js/17.7b400425.js"><link rel="prefetch" href="/assets/js/18.ba0735e5.js"><link rel="prefetch" href="/assets/js/19.cb346590.js"><link rel="prefetch" href="/assets/js/21.ffaebba4.js"><link rel="prefetch" href="/assets/js/22.245211f7.js"><link rel="prefetch" href="/assets/js/23.dcca354f.js"><link rel="prefetch" href="/assets/js/24.a5d8feff.js"><link rel="prefetch" href="/assets/js/4.006852a4.js"><link rel="prefetch" href="/assets/js/5.e5ce56eb.js"><link rel="prefetch" href="/assets/js/6.52340620.js"><link rel="prefetch" href="/assets/js/7.332edea0.js"><link rel="prefetch" href="/assets/js/8.b960260b.js"><link rel="prefetch" href="/assets/js/9.9f015e10.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4ef0f5e0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Breaking-Web</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS 학습하기</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/frontend/css/" class="sidebar-link">Introduction</a></li><li><a href="/study/frontend/css/precedence.html" class="sidebar-link">CSS 우선순위</a></li><li><a href="/study/frontend/css/layout.html" class="sidebar-link">레이아웃 잡기</a></li><li><a href="/study/frontend/css/motion-in-css.html" class="sidebar-link">CSS에서의 모션 효과</a></li><li><a href="/study/frontend/css/pseudo.html" class="sidebar-link">가상선택자</a></li><li><a href="/study/frontend/css/variable.html" class="sidebar-link">CSS 변수</a></li><li><a href="/study/frontend/css/media-query.html" class="sidebar-link">반응형 웹</a></li><li><a href="/study/frontend/css/pre-processer.html" class="sidebar-link">CSS 전처리기</a></li><li><a href="/study/frontend/css/tailwindcss.html" class="sidebar-link">tailwindCSS</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JS 학습하기</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/frontend/js/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/study/frontend/js/arrow-function.html" class="sidebar-link">화살표 함수</a></li><li><a href="/study/frontend/js/this.html" class="sidebar-link">자바스크립트의 this</a></li><li><a href="/study/frontend/js/iife.html" class="sidebar-link">즉시실행함수</a></li><li><a href="/study/frontend/js/asynchronized.html" aria-current="page" class="active sidebar-link">비동기처리</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/frontend/js/asynchronized.html#비동기처리-정확히-알기" class="sidebar-link">비동기처리 정확히 알기</a></li><li class="sidebar-sub-header"><a href="/study/frontend/js/asynchronized.html#비동기처리-대응하기" class="sidebar-link">비동기처리 대응하기</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/frontend/js/asynchronized.html#콜백" class="sidebar-link">콜백</a></li><li class="sidebar-sub-header"><a href="/study/frontend/js/asynchronized.html#promise" class="sidebar-link">Promise</a></li><li class="sidebar-sub-header"><a href="/study/frontend/js/asynchronized.html#async-await" class="sidebar-link">async/await</a></li></ul></li></ul></li><li><a href="/study/frontend/js/context.html" class="sidebar-link">실행 컨텍스트</a></li><li><a href="/study/frontend/js/closure.html" class="sidebar-link">클로저</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="비동기처리"><a href="#비동기처리" class="header-anchor">#</a> 비동기처리</h1> <h2 id="비동기처리-정확히-알기"><a href="#비동기처리-정확히-알기" class="header-anchor">#</a> 비동기처리 정확히 알기</h2> <p>흔히 자바스크립트를 배울 때, 비동기처리라고 하면, callback, promise, async/await 등을 사용하여 비동기 함수를 동기적으로 처리할 수 있도록 하는 것을 배웁니다.<br> <br>
그래서 흔히들 '비동기처리 = 특정로직이 끝날 때까지 기다렸다가 다음 동작을 실행하는 것'이라고 오해할 수 있는데, 사실 비동기처리라는 말은 그와 반대로, <strong>특정로직의 실행이 끝날 때까지 기다려주지 않고, 다음 동작을 실행하는 것</strong>을 뜻합니다.<br> <br>
자바스크립트는 코드를 비동기적으로 처리하며, 이러한 특성으로 인해 많은 문제점들이 생겨납니다.</p> <div class="custom-block tip"><p class="custom-block-title">참고</p> <p><code>setTimeout</code>, <code>ajax</code>와 같이 함수종료까지 시간이 걸리지만 비동기적으로 처리되는 함수들을 비동기 함수라고 부릅니다.</p></div> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;working&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>일반적인 동기적 처리의 관점에서 보았을 때, 위 코드 실행시 결과값은 <code>&quot;start&quot;</code> -&gt; <code>&quot;working&quot;</code> -&gt; <code>&quot;end&quot;</code>의 순으로 출력되어야 합니다. 그러나, 자바스크립트는 코드를 비동기적으로 처리하기 때문에 <code>&quot;start&quot;</code> -&gt; <code>&quot;end&quot;</code> -&gt; <code>&quot;working&quot;</code>의 순서로 결과값이 출력됩니다. 자바스크립트는 <code>setTimeout</code> 함수의 종료를 기다려주지 않기 때문입니다. 이러한 문제는 서버로부터 데이터를 받아오는 작업이 많은 페이지를 개발하는 경우 큰 문제점이 될 수 있습니다.</p> <h2 id="비동기처리-대응하기"><a href="#비동기처리-대응하기" class="header-anchor">#</a> 비동기처리 대응하기</h2> <h3 id="콜백"><a href="#콜백" class="header-anchor">#</a> 콜백</h3> <p>위에서 본 예시에서, <code>setTimeout</code> 함수 안에 익명의 함수를 인자로 전달하여 사용하였습니다. 이러한 방식으로, 다른 함수에 인자로 전달되어 사용되는 함수를 콜백함수라고 합니다.
<br>
비동기 함수, 이벤트 함수와 같이 특정 시점에 사용자가 지정한 함수를 실행해야 한다거나, 함수 내에서 발생하는 데이터들을 사용자가 인자로 받아서 함수를 작성해야 할 때에 주로 콜백함수가 사용됩니다.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* 1: 비동기함수에서의 callback 사용 */</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setTImeout 함수는 특정시간 이후에 사용자 정의함수를 실행해야 한다&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* 2: 함수 실행 과정에서 발생하는 데이터를 사용자가 사용할 수 있도록 콜백 사용 */</span>
<span class="token keyword">function</span> <span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> someData <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

  <span class="token comment">//...</span>
  <span class="token function">callback</span><span class="token punctuation">(</span>someData<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//...</span>
<span class="token punctuation">}</span>

<span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>당연한 소리지만, 콜백함수를 사용하기 위해서는 먼저 위의 예제의 2번과 같이 메소드 정의 간 콜백함수를 매개변수로 받는 부분, 특정 시점에 콜백함수를 실행하는 부분이 정의되어 있어야 합니다. 또한, 여러 비동기함수가 순차적으로 실행되는 경우가 많이 있는데, 이럴 때 콜백함수 안에 콜백함수를 넣고... 또 그 안에 콜백함수를 넣는 것이 반복되다보면 콜백지옥에 빠질 수 있다.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* 보기만해도 어지러운 콜백지옥 */</span>
<span class="token function">getLoginStatus</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">login</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">checkUserType</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">getUserData</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">updateLoginLog</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">fetchSomeData</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">/* do Something */</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="promise"><a href="#promise" class="header-anchor">#</a> Promise</h3> <p><code>Promise</code>는 콜백의 문제점을 해결하기 위해 등장한 패턴입니다.<br> <br> <code>Promise</code>는 **'언젠가 끝나는 작업의 결과값'**을 전달해줍니다. 개발자는 이 값을 전달받아 사용하기 위해 then 메소드를 통해 콜백을 등록하여, 작업이 끝났을 때 전달값을 가지고 수행할 작업을 정의할 수 있습니다. 중요한 점은, <code>then</code> 메소드의 리턴값 역시 <code>Promise</code>이기 때문에 <code>Promise</code>는 이러한 <code>then</code> 메소드를 체이닝하여 콜백보다 깔끔하게 순차작업들을 나열할 수 있습니다.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* Promise Example 1 */</span>
<span class="token keyword">let</span> <span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> i'm</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">c</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> seungro</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">buttonClickCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    textarea<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">result 1: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">b</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    textarea<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">result 2: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">c</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    textarea<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">result 3: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;finish!&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    textarea<span class="token punctuation">.</span>value <span class="token operator">+=</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="example" data-v-2301782c><!----> <!----> <!----> <div class="callback-example-container" data-v-2301782c><button class="example-btn" data-v-2301782c>여기를 눌러 위 코드를 실행시켜보세요</button> <textarea class="promise-textarea rounded-lg mt-4 border-2 w-full h-32" data-v-2301782c></textarea></div> <!----> <!----></div> <p>만약 <code>Promise</code> 함수를 실행하다가 오류가 발생하거나, <code>reject</code>가 호출되면 <code>catch</code> 메소드를 통해 오류를 처리할 수 있습니다.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* Promise Example 2 */</span>
<span class="token keyword">let</span> <span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;3 + 10 = ?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token number">13</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;correct!!!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;wrong!!!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  textarea<span class="token punctuation">.</span>value <span class="token operator">+=</span> result<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  textarea<span class="token punctuation">.</span>value <span class="token operator">+=</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  textarea<span class="token punctuation">.</span>value <span class="token operator">+=</span> err<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>textarea</code>에는 과연 어떤 값이 출력될까요?</p> <h3 id="async-await"><a href="#async-await" class="header-anchor">#</a> async/await</h3> <p>Promise를 사용하면 큰 문제는 없어보입니다. 그러나 여전히, 함수들을 사용하는 코드가 조금 길고, 완벽히 자연스러운 흐름이라고 보기는 어려운 것 같습니다.<br> <br>
이러한 불편함을 또 해결하기 위해, async/await 패턴이 생겨났습니다. async/await 패턴을 사용하면, 위에서 배운 <code>Promise</code> 객체를 반환하는 함수를 보다 더 직관적이고 깔끔하게 사용할 수 있습니다.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">buttonClickCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  textarea<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">result 1: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">b</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  textarea<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">result 1: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">c</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  textarea<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">result 1: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  textarea<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token string">&quot;finish!&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>위에서 확인한 Promise Example 1의 <code>buttonClickCallback</code>과, 위의 코드는 완전히 동일하게 동작합니다.<br> <br>
또한, <code>try/catch</code> 구문을 사용하여 오류 처리도 할 수 있습니다.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study/frontend/js/iife.html" class="prev">
        즉시실행함수
      </a></span> <span class="next"><a href="/study/frontend/js/context.html">
        실행 컨텍스트
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6025681a.js" defer></script><script src="/assets/js/2.0e074105.js" defer></script><script src="/assets/js/20.9b388371.js" defer></script><script src="/assets/js/3.009c281c.js" defer></script>
  </body>
</html>
