# 리눅스와 CLI

## CLI란?

리눅스에서는 주로 CLI 환경을 사용합니다. CLI는 GUI와 대비되는 개념입니다. 그래픽유저인터페이스라 불리는 GUI와는 다르게 오직 문자열만을 다루는 인터페이스입니다. CLI에서는 문자열 입출력만이 가능하여 GUI에 익숙한 사용자에게는 불편하게 다가올 수 있지만, 개발과 파일/디렉토리 관리, 기타 설정들을 마우스 조작 없이 키보드만으로 빠르게 수행할 수 있어 아주 강력한 인터페이스입니다. 리눅스에서는 이러한 CLI 환경을 터미널이라는 애플리케이션을 통해 사용할 수 있습니다. 터미널에 접속하면, 이제부터 여러분은 각종 **명령어**들을 기반으로 컴퓨터를 조작할 수 있습니다.

## 터미널과 셸, 그리고 커널

방금 터미널을 통해 컴퓨터를 조작할 수 있다고 했는데, 이 과정을 좀 더 자세히 들여다보겠습니다.  
<br />
컴퓨터는 하드웨어와 소프트웨어로 구성되어 있습니다. 컴퓨터를 제어하기 위해서는 이 소프트웨어와 하드웨어가 상호작용하며 동작해야 하는데, 이를 위해 소프트웨어와 하드웨어를 잇는 인터페이스가 필요합니다. 즉, 메모리를 관리하고, 어느 프로세스가 CPU를 얼마나 사용할 지 결정하고, 시스템을 호출하는 등의 작업을 수행하는 등, 시스템 자원들을 관리하는 작업들을 수행할 어떤 무언가가 필요한데, 이 인터페이스가 바로 **커널**입니다.  
<br />
그러나 커널이 수행하는 작업이 중요한 작업인 만큼, 사용자나 응용 프로그램이 커널에 직접 접근하는 것은 매우 위험한 일입니다. 이에 따라, 운영체제는 커널에 직접 접근하지 않고 이러한 기능을 사용할 수 있도록 **시스템콜**이라는 인터페이스를 제공합니다. 그렇다면 우리는 이 시스템콜을 어떻게 호출할 수 있을까요?  
<br />
앞서 이야기 한 것처럼, 사용자가 터미널에 명령어를 입력하면 그 명령어는 **셸**이라고 부르는, 명령어 해석기에게 전달됩니다. 셸은 전달받은 명령어를 해석하여 시스템콜을 통해 필요한 작업들을 수행합니다.

::: tip 인터페이스
운영체제나 프로그래밍과 같은 분야를 공부하다보면, 인터페이스라는 단어가 많이 등장합니다. 인터페이스란 개체와 개체 간 소통을 위한 매개체를 의미합니다.  
<br />
예를들어, TV 채널을 변경하기 위해 TV 내부에서 어떤 일이 일어나는 지 알 필요 없이, 우리가 할 일은 그저 리모컨을 누르는 것입니다. 이 때 리모컨이 TV와 우리 사이의 인터페이스 역할을 하는 것입니다.  
<br />
이러한 인터페이스는 리모컨과 같이 편리한 사용을 돕는 역할도 하지만, 올바르지 않은 접근을 방지하여 개체가 망가지지 않고 정상적으로 동작하게 하는데에 큰 역할을 합니다. 
:::

## 디렉토리

CLI는 마치 파일탐색기처럼 디렉토리의 개념이 있습니다. 터미널을 실행하면 리눅스에서는 일반적으로 `/root`(root 사용자의 경우) 혹은, `/home/<USERNAME>`(일반사용자의 경우) 디렉토리에서 시작됩니다. 이는 사용자디렉토리, 혹은 홈디렉토리라고 부르며, `~`로 표시됩니다.

## 명령어 기초

명령어는 `명령어 <옵션> <인자값>`의 형식으로 구성되어 있습니다. 같은 명령어라도, 옵션에 따라 조금씩 다른 결과를 출력합니다. 예를들어, `cat` 명령어는 특정 파일의 내용을 화면에 출력해주는 명령어입니다. 그런데 만약 `cat -n filename`과 같이 사용하면, 파일의 내용을 라인넘버와 함께 출력해줍니다. 여기서 `-n` 부분이 옵션입니다. 그리고 인자값은 `filename`이 됩니다.

::: tip 옵션
옵션은 하이픈이 하나인 경우(`-`)가 있고, 두개인 경우(`--`)가 있습니다. 옵션이 한 문자인 경우는 하이픈을 하나만 쓰고, 한 단어인 경우에는 하이픈을 두개 씁니다. 하이픈은 하나인데 뒤에 여러 문자가 달려있는 경우에는, 각각의 옵션을 붙여 쓴 것과 같습니다. 예를들어, `-help` 옵션은 `-h`, `-e`, `-l`, `-p`, 네개의 옵션을 붙여쓴 것이고, `--help` 옵션은 'help'라는 하나의 옵션을 의미합니다.  
<br />
다만, 이러한 규칙이 모든 명령어들에 100% 적용되는 것은 아니니, 주의해야 합니다. 
:::

## 절대경로와 상대경로

리눅스의 CLI에서는 절대경로와 상대경로를 사용할 수 있습니다. `.`으로 시작하거나. 디렉토리명으로 바로 시작(ex. `some/dir/`)하면 상대경로, `/`으로 시작하면 절대경로입니다.

## 파일접근권한

리눅스의 모든 파일은 소유주와 소유그룹이 존재한다. 또한 이를 바탕으로 소유주, 소유그룹, 기타 사용자 별로 파일에 접근할 수 있는 권한을 각각 달리 설정할 수 있으며, 권한은 `r`, `w`, `x`, `-` 네 종류가 있으며 이를 조합하여 사용할 수 있습니다.

|권한|의미|숫자표현|
|-|-|-|
|`r`|읽기|4|
|`w`|쓰기|2|
|`x`|실행|1|
|`-`|권한없음|0|

이러한 권한은 `ls -al`, `ll` 등 명령어를 통해 파일목록을 출력하여 확인할 수 있는데, `rwxrw-r--` 이런 형태를 하고 있습니다. 이는 세글자씩 세쌍으로 나누어 읽으면 되며, 첫번째 쌍부터 소유주, 소유그룹, 기타 사용자의 권한을 나타냅니다.  

- 첫번째 쌍 (`rwx`): 소유주에게 읽기, 쓰기, 실행 권한이 모두 있다는 뜻입니다.
- 두번째 쌍 (`rw-`): 소유그룹에 읽기, 쓰기 권한이 있고, 실행 권한이 없다는 뜻입니다.
- 세번째 쌍 (`r--`): 기타 사용자들에게는 읽기 권한만 있다는 뜻입니다.

이러한 파일권한은, 숫자로도 표현될 수 있는데, 각 권한이 가진 숫자를 조합하여 표현합니다. 예를들어 모든 권한이 있을 경우 `7`, 읽기와 쓰기 권한만 있는 경우 `6`, 읽기 권한만 있는 경우 `4`의 형태로 표현하며, `rwxrw-r--`와 `764`와 같은 권한 표현이라 할 수 있습니다.  
<br />
또한, 권한은 파일 뿐 아니라 디렉토리에도 적용되어 있는데, 디렉토리접근권한이 파일접근권한보다 우선시 됩니다. 즉, 어떤 파일에 접근권한은 있지만, 그 파일이 속한 디렉토리에 접근권한이 없다면 접근할 수 없습니다.

::: tip root
관리자 권한을 가진 사용자는 권한설정에 관계없이 모든 디렉토리 및 파일에 대해 모든 작업이 가능합니다. 또한, 일반 사용자에서 임시적으로 관리자 권한이 필요한 경우 명령어 앞에 `sudo`를 붙여 사용할 수 있습니다.
:::